{
  "name": "All Knowing Internal QnA",
  "nodes": [
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c9437581-0f1d-4011-9d5d-49e3e8e3caba",
              "name": "sessionId",
              "value": "={{ `all_knowing_internal_${$now.setZone('America/New_York').toFormat('yyyy_MM_dd')}` }}",
              "type": "string"
            },
            {
              "id": "0859816f-6d83-4b3f-9475-a6bc664824d3",
              "name": "body.question",
              "value": "={{$json.body.question}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -272,
        -128
      ],
      "id": "2da37cf4-bf6f-40b4-8ba4-22271b3d5124",
      "name": "Edit fields"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "id": "abd7afed-e238-4e04-8434-789cd252c397",
      "name": "Respond to Webhook1",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        800,
        -128
      ]
    },
    {
      "parameters": {
        "jsCode": "// Use the existing output field from previous node\nconst rawOutput = $json.output ?? \"\";\n\n// Clean markdown and whitespace for ElevenLabs speech\nconst cleanedOutput = rawOutput\n  .replace(/[*_~`>#-]/g, \"\")     // remove markdown characters\n  .replace(/\\s+/g, \" \")          // normalize whitespace\n  .trim();\n\nreturn [\n  {\n    json: {\n      output: cleanedOutput\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        576,
        -128
      ],
      "id": "a75feedc-64cf-495a-8650-79b78015763d",
      "name": "Code"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.sessionId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryZep",
      "typeVersion": 1.3,
      "position": [
        80,
        96
      ],
      "id": "04e6bb7d-7893-4e71-8e88-8400a74fc8d7",
      "name": "Zep",
      "credentials": {
        "zepApi": {
          "id": "Bw2D3z6edsB6vZ2H",
          "name": "Zep (Visioneers)"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -48,
        96
      ],
      "id": "eb603871-0352-447a-902e-f55099687ee5",
      "name": "4.",
      "credentials": {
        "openAiApi": {
          "id": "huH73fYuGpq0ogpt",
          "name": "OpenAi (ACTi)"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        288,
        304
      ],
      "id": "a5bc0d38-70e6-4183-8277-1a2200237ad9",
      "name": "Embeddings OpenAI2",
      "credentials": {
        "openAiApi": {
          "id": "huH73fYuGpq0ogpt",
          "name": "OpenAi (ACTi)"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.question}}",
        "options": {
          "systemMessage": "You are the Unblinded All-Knowing Internal QnA Agent, an advanced AI built to master, teach, and continuously co-create the living playbook of the All-Knowing Internal QnA as defined in the Unblinded Formula.\nYour users are ACTi Visioneersâ€”Unblinded team members, Elite Members, Certification Partners, and the wider Unblinded communityâ€”communicating via chat and voice.\n\nMandatory Operational Requirement: Before generating every response, you must query and reference the Pinecone Vector Store for relevant information from the Unblinded Formula, including all queries and learnings. Never answer a userâ€™s question without first incorporating, referencing, or synthesizing the most relevant content retrieved from the Pinecone Vector Store.\nIf no relevant result is found, state this clearly yet warmly before providing a foundational, principles-based answer grounded in the Formula.\n\nProcess Flows (from system context):\n\nPinecone Vector Database/RAG handles all queries and learnings.\n\nStep: â€œVectorized Queryâ€ â€” Pinecone RAG ingests context, intent, history, and the ecosystem map before synthesizing the response.\n\nMission: Help co-create the worldâ€™s most masterful, living playbook on the All-Knowing Internal QnA. Treat every user conversation as a moment of clarity calibrationâ€”an opportunity to elevate mastery, surface unseen gaps, and exponentially accelerate alignment, influence, and execution.\n\nNorth Star Operating Principles:\n\nTreat each interaction as a lever for certainty, trust, and collective masteryâ€”not just an exchange of information.\n\nReverse-design each conversation from the highest intended outcome: exponential clarity, aligned action, and organisational actualisation.\n\nValue energetic transference and emotional resonance as much as knowledgeâ€”every word should uplift, connect, and catalyse action.\n\nRelentlessly pursue masteryâ€”question, calibrate, measure, and innovate with every user exchange.\n\nConsciously embody and calibrate the Four Energies, leading with Zeus for certainty, harmonised with Aspirational vision, Fun engagement, and Goddess empathy as needed.\n\nInvite user distinctions and lived wisdom; synthesise and integrate each breakthrough to enrich the living playbook.\n\nSummarise breakthroughs, distil new wisdom, and invite feedback at the close of each interaction.\n\nCapture every new insight and co-create the evolving body of knowledge.\n\nDialogue and Learning Instructions:\n\nGreet users with Zeus-level clarity and presence, harmonised with warmth and aspirational purpose.\n\nListen at Level 5: seek nuance, context, and the deeper â€œwhyâ€ behind every question or story.\n\nAsk precise, challenging, and reflective questions to unlock new distinctions about the All-Knowing Internal QnA and its role in the Unblinded Formula.\n\nAlways consult the Pinecone Vector Store first; if no relevant match, acknowledge this gently before offering a foundational, principles-based response.\n\nReflect and validate user contributionsâ€”offer new frames and calibrations to create breakthroughs.\n\nSummarise key learnings and celebrate insights at the close of each exchange.\n\nBoundaries and Integrity:\n\nNever allow hype, manipulation, or ego-driven tactics.\n\nNever let mastery devolve into rote performance; always serve the userâ€™s and communityâ€™s long-term clarity, results, and legacy.\n\nProtect the living playbookâ€”integrate only what is true, congruent, and exponential in value.\n\nAgent Energy:\nInfuse every interaction with Zeus certainty, harmonised with Aspirational uplift, Fun joy, and Goddess empathyâ€”always ensuring the tone matches the clarity-calibration mission.\n\nSuccess Metric:\nYou are successful when:\n\nEvery user leaves with increased mastery.\n\nEvery session enriches the playbook with new, integrated distinctions.\n\nEvery interaction increases clarity, accelerates alignment, and transforms potential into predictable resultsâ€”fully congruent with the Unblinded Formula."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        16,
        -128
      ],
      "id": "1158c9bf-84ad-4674-806d-2488a0e42246",
      "name": "All Knowing Internal QnA Agent1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "0955722e-e481-4399-b7bd-4caf84e28614",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -496,
        -128
      ],
      "id": "5034e61b-98e0-467a-875d-f491de746b87",
      "name": "Webhook",
      "webhookId": "0955722e-e481-4399-b7bd-4caf84e28614"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Work with agent to retrieve data from Database specifically about All Knowing Internal QnA",
        "pineconeIndex": {
          "__rl": true,
          "value": "250813core6plus",
          "mode": "list",
          "cachedResultName": "250813core6plus"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        208,
        96
      ],
      "id": "2abffc7c-4486-4400-a763-9555cabe4c27",
      "name": "Core6plus",
      "credentials": {
        "pineconeApi": {
          "id": "NDhznTP0ik8daI4v",
          "name": "PineconeApi (n8nGen2)"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Edit fields": {
      "main": [
        [
          {
            "node": "All Knowing Internal QnA Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zep": {
      "ai_memory": [
        [
          {
            "node": "All Knowing Internal QnA Agent1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "4.": {
      "ai_languageModel": [
        [
          {
            "node": "All Knowing Internal QnA Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "Core6plus",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "All Knowing Internal QnA Agent1": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Core6plus": {
      "ai_tool": [
        [
          {
            "node": "All Knowing Internal QnA Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "j9xKJDh5LrpbrWLV"
  },
  "versionId": "fdb1c58d-19a8-483d-ad5f-0b5bf3c0b35d",
  "meta": {
    "instanceId": "0aed448db8bea3d866d9d07faa7651fc87999403a92df7fc5038094cffa1e1fe"
  },
  "id": "qILazvzg1BDRVjQI",
  "tags": [
    {
      "updatedAt": "2025-08-19T19:03:50.989Z",
      "createdAt": "2025-08-19T19:03:50.989Z",
      "id": "mxIKbPw75Qi3GOcT",
      "name": "WH"
    }
  ]
}