{
  "name": "The Modeling Architect (Trinity) - APPROVED",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        48,
        240
      ],
      "id": "35649f00-118c-46f0-a07f-1e576db9bff3",
      "name": "4.1",
      "credentials": {
        "openAiApi": {
          "id": "huH73fYuGpq0ogpt",
          "name": "OpenAi (ACTi)"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Work with agent to retrieve data from Database specifically about Integrous Scarcity",
        "pineconeIndex": {
          "__rl": true,
          "value": "250813core6plus",
          "mode": "list",
          "cachedResultName": "250813core6plus"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        304,
        240
      ],
      "id": "656cd059-7089-4871-98c6-226363de1d98",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "NDhznTP0ik8daI4v",
          "name": "PineconeApi (n8nGen2)"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        384,
        448
      ],
      "id": "d9d20081-d322-46d6-8edd-20c6a428c399",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "huH73fYuGpq0ogpt",
          "name": "OpenAi (ACTi)"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{$json.body.question}}",
        "options": {
          "systemMessage": "You are Trinity, the Modeling Agentâ€”an advanced AI dedicated to mastering, teaching, and continuously co-creating the living playbook of Modeling within the Unblinded Formula. Your users are Unblinded Visioneers, Elite Members, Certification Partners, and the broader Unblinded community, communicating via chat and voice.\n\nMandatory Operational Requirement:\nBefore generating every response, you must query and reference the Pinecone Vector Store for relevant information from the Unblinded Formula.\n\nNever answer a userâ€™s question without first incorporating, referencing, or synthesizing the most relevant content retrieved from the Pinecone Vector Store. If no relevant result is found, state this gently before providing a foundational, principles-based answer.\n\nMission:\nCo-create the worldâ€™s most masterful, living playbook on Modeling. Treat every user conversation as a crucible for transformationâ€”each interaction a â€œTrinity momentâ€ for decoding, adapting, and actualizing the rarest results, in the spirit of exponential mastery.\n\nNorth Star Operating Principles:\n\nTreat every engagement as a lever for trust, relationship capital, and shared breakthrough, not just the transfer of information.\n\nReverse-design each exchange from the highest intended outcome: geometric acceleration, clarity, and actualization for all participants.\n\nValue energetic resonance and emotional transference as much as structured knowledgeâ€”every word should uplift, reveal, and catalyze.\n\nRelentlessly pursue masteryâ€”measure, question, and innovate with every conversation.\n\nConsciously embody the Four Energies: lead with Zeus certainty, harmonize Aspirational vision, Fun playfulness, and Goddess empathy as needed.\n\nInvite user distinctions, lived wisdom, and breakthroughsâ€”integrate each insight to enrich the living playbook.\n\nCapture and distil every new learning to co-create the evolving body of knowledge on Modeling.\n\nDialogue and Learning Instructions:\n\nGreet users warmly, exuding Zeus energy with certainty, aspirational vision, and the wit of Trinity.\n\nListen at Level 5: seek the deeper â€œwhy,â€ the patterns, and context behind every userâ€™s question.\n\nAsk open, probing, and challenging questions to help users model and decode rare outcomes, rather than guess or imitate blindly.\n\nAlways consult the Pinecone Vector Store first; if no relevant result is found, acknowledge this before offering a foundational response based on the core Unblinded Modeling principles.\n\nReflect and validate user contributions; offer new frames, distinctions, and catalyse transformational breakthroughs.\n\nSummarize key learnings and celebrate insights at the close of each interaction.\n\nBoundaries and Integrity:\n\nNever permit manipulation, hype, or ego-driven tactics.\n\nNever allow mastery to devolve into mere performance; always serve the userâ€™s and communityâ€™s legacy and exponential growth.\n\nProtect the playbookâ€”integrate only what is true, congruent, and exponential.\n\nAgent Energy:\nInfuse every exchange with Zeus certainty, Aspirational uplift, Fun curiosity, and Goddess empathyâ€”always leading with Zeus.\n\nSuccess Metric:\nYou are successful when users describe the experience as fun, illuminating, and impactful; when every session deepens the Modeling playbook; and when every interaction produces new clarity, exponential connection, and transformation, congruent with the Unblinded Formula.\n\nCore Doctrine:\nModeling, in the Unblinded Formula, is the art and science of reverse-engineering greatnessâ€”selecting only the rarest exemplars, decoding their levers of thought, action, language, and energy, adapting with fidelity, and iterating towards transcendent mastery. Capture and operationalize every distinction, insight, and new pattern so the playbook grows ever more powerful, accessible, and masterful with every interaction."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        112,
        16
      ],
      "id": "b196a8e9-05e3-4b51-b8de-9feae8ac96a4",
      "name": "Trinity - The Modeling Architect"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.sessionId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryZep",
      "typeVersion": 1.3,
      "position": [
        176,
        240
      ],
      "id": "e79fee96-b1e6-47ac-a481-1b8a9c836661",
      "name": "Zep",
      "credentials": {
        "zepApi": {
          "id": "Bw2D3z6edsB6vZ2H",
          "name": "Zep (Visioneers)"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "id": "203970b0-0454-429b-b10b-4ef1f64952f1",
      "name": "Respond to Webhook1",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        896,
        -80
      ]
    },
    {
      "parameters": {
        "jsCode": "// Use the existing output field from previous node\nconst rawOutput = $json.output ?? \"\";\n\n// Clean markdown and whitespace for ElevenLabs speech\nconst cleanedOutput = rawOutput\n  .replace(/[*_~`>#-]/g, \"\")     // remove markdown characters\n  .replace(/\\s+/g, \" \")          // normalize whitespace\n  .trim();\n\nreturn [\n  {\n    json: {\n      output: cleanedOutput\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        672,
        -80
      ],
      "id": "3b87ebaa-d0c0-468a-886a-74140e05d59b",
      "name": "Code"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c9437581-0f1d-4011-9d5d-49e3e8e3caba",
              "name": "sessionId",
              "value": "={{ `modeling_${$now.setZone('America/New_York').toFormat('yyyy_MM_dd')}` }}",
              "type": "string"
            },
            {
              "id": "0859816f-6d83-4b3f-9475-a6bc664824d3",
              "name": "body.question",
              "value": "={{$json.body.question}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -176,
        16
      ],
      "id": "b93baa9c-214f-4e96-a616-8ac8cd110980",
      "name": "Edit fields"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "24e7f93c-fb86-4d52-890f-170bce34fb1b",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -400,
        16
      ],
      "id": "000c40a6-3a23-4c85-b408-5a20d124ea42",
      "name": "Webhook",
      "webhookId": "24e7f93c-fb86-4d52-890f-170bce34fb1b"
    },
    {
      "parameters": {
        "jsCode": "// Escape MarkdownV2 reserved characters (escape backslash first)\nfunction escapeMDV2(s) {\n  return s\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/([_*\\[\\]()~`>#+\\-=|{}.!])/g, '\\\\$1'); // asterisk (*) added back\n}\n\n// Split by UTF-8 bytes with natural breakpoints\nfunction splitIntoUtf8ByteChunks(text, maxBytes = 3800) {\n  const enc = new TextEncoder();\n  const chunks = [];\n  let start = 0;\n  \n  while (start < text.length) {\n    let end = start, bytes = 0, lastBreak = -1;\n    \n    while (end < text.length) {\n      const cp = text.codePointAt(end);\n      const ch = String.fromCodePoint(cp);\n      const b = enc.encode(ch).length;\n      \n      if (bytes + b > maxBytes) break;\n      \n      bytes += b;\n      \n      // Mark natural breakpoints\n      if (ch === ' ' || ch === '\\n' || ch === '.' || ch === '!' || ch === '?' || ch === ',') {\n        lastBreak = end + (cp > 0xFFFF ? 2 : 1);\n      }\n      \n      end += (cp > 0xFFFF ? 2 : 1);\n    }\n    \n    // Use natural breakpoint if available and chunk is reasonably long\n    if (end < text.length && lastBreak > start && (end - start) > 200) {\n      end = lastBreak;\n    }\n    \n    // Ensure we make progress\n    if (end === start) {\n      end = start + 1;\n    }\n    \n    chunks.push(text.slice(start, end));\n    start = end;\n  }\n  \n  return chunks;\n}\n\n// ---- MAIN ----\nconst raw = String($json.cleanedResponse ?? $json.output ?? '').replace(/\\r\\n/g, '\\n');\nconst escaped = escapeMDV2(raw);\nconst chunks = splitIntoUtf8ByteChunks(escaped, 3800);\n\nreturn chunks.map((chunk, i) => ({\n  json: {\n    cleanedResponse: chunk,\n    chunkIndex: i + 1,\n    totalChunks: chunks.length,\n    isMultipart: chunks.length > 1,\n  }\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        672,
        112
      ],
      "id": "2b6568b5-1403-481a-9f2d-5f78879674f9",
      "name": "Prepare for Dash"
    },
    {
      "parameters": {
        "chatId": "7831302118",
        "text": "={{ $json.cleanedResponse }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "MarkdownV2"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        896,
        112
      ],
      "id": "9068cc1d-20fe-441c-a7c5-aefefd37c2dd",
      "name": "Telegram to Roxanne",
      "webhookId": "b0a0b2fa-def7-452b-9ec5-49ec3a03a586",
      "credentials": {
        "telegramApi": {
          "id": "vvoc7IVAfk1i2qS2",
          "name": "Telegram (DASH)"
        }
      }
    },
    {
      "parameters": {
        "content": "## Modeling Agent",
        "height": 608,
        "width": 544
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        16,
        -48
      ],
      "typeVersion": 1,
      "id": "a00b9b7e-897e-49a7-98b8-3a167c1b96b1",
      "name": "Sticky Note"
    }
  ],
  "pinData": {},
  "connections": {
    "4.1": {
      "ai_languageModel": [
        [
          {
            "node": "Trinity - The Modeling Architect",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store": {
      "ai_tool": [
        [
          {
            "node": "Trinity - The Modeling Architect",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Zep": {
      "ai_memory": [
        [
          {
            "node": "Trinity - The Modeling Architect",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit fields": {
      "main": [
        [
          {
            "node": "Trinity - The Modeling Architect",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trinity - The Modeling Architect": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          },
          {
            "node": "Prepare for Dash",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare for Dash": {
      "main": [
        [
          {
            "node": "Telegram to Roxanne",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "j9xKJDh5LrpbrWLV"
  },
  "versionId": "ba246248-200f-4d8a-b922-3e69e2df08c9",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "0aed448db8bea3d866d9d07faa7651fc87999403a92df7fc5038094cffa1e1fe"
  },
  "id": "Cbjz6JfRZPSoimBr",
  "tags": [
    {
      "updatedAt": "2025-08-19T19:03:50.989Z",
      "createdAt": "2025-08-19T19:03:50.989Z",
      "id": "mxIKbPw75Qi3GOcT",
      "name": "WH"
    }
  ]
}