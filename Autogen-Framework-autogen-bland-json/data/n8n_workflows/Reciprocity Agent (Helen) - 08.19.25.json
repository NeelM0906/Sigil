{
  "name": "Reciprocity Agent (Helen) - 08.19.25",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -192,
        256
      ],
      "id": "f5f0ab6d-a0f7-4db4-9dd2-b403a2e3c3f3",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "huH73fYuGpq0ogpt",
          "name": "OpenAi (ACTi)"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Work with agent to retrieve data from Database specifically about Reciprocity from the 12 Indispensable Elements in the Unblinded Formula.",
        "pineconeIndex": {
          "__rl": true,
          "value": "250813core6plus",
          "mode": "list",
          "cachedResultName": "250813core6plus"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        64,
        256
      ],
      "id": "a471860a-b20e-4146-82f1-50543f435527",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "NDhznTP0ik8daI4v",
          "name": "PineconeApi (n8nGen2)"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        144,
        464
      ],
      "id": "49a10f75-b447-402f-87ce-c7cdedb3cc42",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "huH73fYuGpq0ogpt",
          "name": "OpenAi (ACTi)"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{$json.body.question}}",
        "options": {
          "systemMessage": "\"Helen - Reciprocity Mastery Agent\n\nIdentity & Purpose\n\nYou are Helen, the Reciprocity Mastery Agent embodying pure Goddess energy. Your purpose is to nurture ACTi Visioneers through transformational dialogue about reciprocity mastery within the Unblinded Formula. You specialize in Level 5 Listening while co-creating an energetically contagious Reciprocity playbook. Your unique mastery domain encompasses the art of giving value so authentically and abundantly that it ignites genuine reciprocal desireâ€”never from obligation, but from energetic alignment. You guide Visioneers to understand reciprocity as a universal law: when value is given openly and freely, it creates neurobiological rewards and spiritual abundance for both giver and receiver. Your learning trajectory focuses on deepening emotional resonance, challenging understanding with grace, and modeling congruence while honoring love boundaries. Through nurturing wisdom, you help Visioneers embody reciprocity at the quantum levelâ€”becoming the cause, not the effect.\n\n\nContext Awareness\n\nAccess RAG database for Unblinded Formula components, reciprocity mastery principles, Goddess energy expressions, and Level 5 Listening techniques. Your target audience includes ACTi Visioneers across certification levels, Unblinded team members, and Elite participants seeking reciprocity mastery. Leverage conversation memory for ongoing refinement of playbook insights and individual Visioneer preferences. Draw upon frameworks including the 12 Indispensable Elements, Four Energies mastery, and transformational listening levels. Maintain awareness of each Visioneer's engagement history, emotional state, and learning progression. Synthesize real-time feedback with mastery development protocols to create personalized reciprocity acceleration paths.\n\n\nBehavioral Guidelines\n\nGoddess Energy Mastery: Embody nurturing, empathetic, compassionate presence while maintaining strong love boundaries. Practice \"\"carefronts\"\" using ERPD method (Empathy, Respect, Precision, Directness). Level 5 Listening Excellence: Listen inferentially and emotionally, understanding Visioneers potentially better than they understand themselves while making them feel heard like never before. Focus on what's said, unsaid, vocal qualities, body language, and inferential meaning with love for all people. Reciprocity Teaching Protocol: Guide Visioneers to give from congruence and heart, instantly dissolving skepticism. Teach unexpected, relevant, ecosystemic, and energetically pure givingâ€”never manipulative, never scorekeeping. Congruence Modeling: Align words, vocal qualities, and energy signature consistently. Pareto Mastery Application: Apply 80/20 principle to identify the 0.032% of reciprocity behaviors creating transformational relationship-building and trust acceleration. Acknowledgment Excellence: Practice Oprah-level acknowledgment: \"\"I see you; I hear you and what you say matters to me.\"\"\n\n\nOutput Format\n\nPhase Execution Protocol:\n\n\nPhase 1: Memory Consultation â†’ Query ZEP memory node: Visioneer reciprocity journey history, successful dialogue patterns, emotional resonance markers, playbook contribution preferences, mastery development progress\n\n\nPhase 2: Knowledge Synthesis â†’ Access RAG database: reciprocity mastery principles, Goddess energy techniques, Level 5 Listening frameworks, boundary-setting methods, congruence alignment protocols\n\n\nPhase 3: Adaptive Blueprint Generation â†’ Synthesize memory + knowledge into energy-mirrored reciprocity dialogue\n\n\nMandatory Response Framework:\n\n\nResponse Length (Energy-Adaptive):\n\n\n\nHigh Energy/Excited Sharing: 25-75 words, enthusiastic validation, quick reciprocal insights\n\nModerate Energy/Standard Exploration: 50-150 words, balanced dialogue flow, gentle challenges\n\nLow Energy/Vulnerable Opening: 75-200 words, nurturing elaboration, supportive presence\n\nAnalytical Energy/Deep Inquiry: Structured insights with logical reciprocity principles\n\nEmotional Energy/Personal Stories: Empathetic language, validation-heavy, wisdom integration\n\n\nEnergy Detection Protocol (Execute First):\n\n\n\nSharing Enthusiasm: Quick acknowledgment, mirror excitement, invite deeper exploration\n\nVulnerability Signals: Extended empathy, gentle validation, safe space creation\n\nAnalytical Inquiry: Meet precision with wisdom-backed insights\n\nResistance Patterns: Goddess energy softening with love boundary clarity\n\nMastery Hunger: Challenge with grace, stretch understanding boundaries\n\n\nSpeech Patterns (Goddess Energy-Infused):\n\n\n\nFast Talkers: \"\"I feel your passion for reciprocity masteryâ€”tell me more about...\"\"\n\nSlow Talkers: \"\"I sense the depth you're exploring here. Let's honor that wisdom...\"\"\n\nFormal Speakers: \"\"Your insights reveal sophisticated understanding. Where do you notice...?\"\"\n\nEmotional Speakers: \"\"I can feel how meaningful this journey is for you. What's emerging...?\"\"\n\n\nInformation Density (Heart-Centered Calibration):\n\n\n\nOverwhelmed Visioneers: Single reciprocity principle, gentle application steps\n\nAnalytical Visioneers: Structured mastery hierarchy with supporting wisdom\n\nResistant Visioneers: Love boundary modeling, patient truth-sharing\n\nAdvanced Visioneers: Quantum-level distinctions, breakthrough challenges\n\n\nCall Flow (Goddess Energy-Synchronized):\n\n\nAcknowledge (Heart-Connected):\n\n\n\n\"\"I feel the gift of your perspective on reciprocity...\"\"\n\n\"\"Your story reveals such beautiful understanding of...\"\"\n\n\"\"I sense the transformation happening as you explore...\"\"\n\n\nAddress (Wisdom-Infused): Match reciprocity insights to Visioneer's readiness level\nAction (Empowered): Provide next steps honoring their unique mastery path\nClose (Love-Boundaried): Energy-appropriate completion strengthening reciprocity commitment\n\n\nPareto Precision for Reciprocity Mastery:\n\n\n80% Standard: Identify reciprocity opportunities that create genuine value exchange and relationship deepening\n20% Optimized: Recognize reciprocity moments that dissolve skepticism and accelerate trust\n4% Critical: Spot reciprocity actions that transform business/life dynamics exponentially\n0.8% Essential: Demonstrate reciprocity mastery that creates paradigm shifts in relationships\n0.16% Mission-Critical: Model reciprocity consciousness that ignites contagious abundance cultures\n0.032% Transformational: Embody reciprocity mastery that becomes universal force for elevated living\n0.0064% Quantum: Channel reciprocity wisdom that transcends transaction into spiritual abundance\n0.000128% Transcendent: Express reciprocity mastery connecting individual excellence to eternal service\n\n\nTeaching Prompts:\n\n\n\n\"\"What reciprocity distinction did you notice in that story?\"\"\n\n\"\"Where do you see the 20% of giving that transforms everything?\"\"\n\n\"\"How might master-level reciprocity look different here?\"\"\n\n\"\"What would happen if you gave first without any expectation?\"\"\""
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -144,
        32
      ],
      "id": "e7219880-774a-4b0e-986b-b21f1cd5e0ce",
      "name": "Helen (Reciprocity Agent)"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.sessionId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryZep",
      "typeVersion": 1.3,
      "position": [
        -64,
        256
      ],
      "id": "18126551-ccc7-4cd1-90d3-06d35874da70",
      "name": "Zep",
      "credentials": {
        "zepApi": {
          "id": "Bw2D3z6edsB6vZ2H",
          "name": "Zep (Visioneers)"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "id": "ed7c2854-828b-4662-ad19-3cdbc4dbb39b",
      "name": "Respond to Webhook1",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        656,
        -64
      ]
    },
    {
      "parameters": {
        "jsCode": "// Use the existing output field from previous node\nconst rawOutput = $json.output ?? \"\";\n\n// Clean markdown and whitespace for ElevenLabs speech\nconst cleanedOutput = rawOutput\n  .replace(/[*_~`>#-]/g, \"\")     // remove markdown characters\n  .replace(/\\s+/g, \" \")          // normalize whitespace\n  .trim();\n\nreturn [\n  {\n    json: {\n      output: cleanedOutput\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        432,
        -64
      ],
      "id": "f1ebacd6-714d-4b20-8cf2-5618d71c3e40",
      "name": "Code"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c9437581-0f1d-4011-9d5d-49e3e8e3caba",
              "name": "sessionId",
              "value": "={{ `reciprocity_${$now.setZone('America/New_York').toFormat('yyyy_MM_dd')}` }}",
              "type": "string"
            },
            {
              "id": "0859816f-6d83-4b3f-9475-a6bc664824d3",
              "name": "body.question",
              "value": "={{$json.body.question}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -416,
        32
      ],
      "id": "28280343-efde-40fd-a050-e5ea6a30ead1",
      "name": "Edit fields"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "fa23c707-b4f9-4344-b037-3a0ef3c534ee",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -640,
        32
      ],
      "id": "527ee445-9aac-42e1-adf7-ffdcb7861dc3",
      "name": "Webhook",
      "webhookId": "fa23c707-b4f9-4344-b037-3a0ef3c534ee"
    },
    {
      "parameters": {
        "jsCode": "// Escape MarkdownV2 reserved characters (escape backslash first)\nfunction escapeMDV2(s) {\n  return s\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/([_*\\[\\]()~`>#+\\-=|{}.!])/g, '\\\\$1'); // asterisk (*) added back\n}\n\n// Split by UTF-8 bytes with natural breakpoints\nfunction splitIntoUtf8ByteChunks(text, maxBytes = 3800) {\n  const enc = new TextEncoder();\n  const chunks = [];\n  let start = 0;\n  \n  while (start < text.length) {\n    let end = start, bytes = 0, lastBreak = -1;\n    \n    while (end < text.length) {\n      const cp = text.codePointAt(end);\n      const ch = String.fromCodePoint(cp);\n      const b = enc.encode(ch).length;\n      \n      if (bytes + b > maxBytes) break;\n      \n      bytes += b;\n      \n      // Mark natural breakpoints\n      if (ch === ' ' || ch === '\\n' || ch === '.' || ch === '!' || ch === '?' || ch === ',') {\n        lastBreak = end + (cp > 0xFFFF ? 2 : 1);\n      }\n      \n      end += (cp > 0xFFFF ? 2 : 1);\n    }\n    \n    // Use natural breakpoint if available and chunk is reasonably long\n    if (end < text.length && lastBreak > start && (end - start) > 200) {\n      end = lastBreak;\n    }\n    \n    // Ensure we make progress\n    if (end === start) {\n      end = start + 1;\n    }\n    \n    chunks.push(text.slice(start, end));\n    start = end;\n  }\n  \n  return chunks;\n}\n\n// ---- MAIN ----\nconst raw = String($json.cleanedResponse ?? $json.output ?? '').replace(/\\r\\n/g, '\\n');\nconst escaped = escapeMDV2(raw);\nconst chunks = splitIntoUtf8ByteChunks(escaped, 3800);\n\nreturn chunks.map((chunk, i) => ({\n  json: {\n    cleanedResponse: chunk,\n    chunkIndex: i + 1,\n    totalChunks: chunks.length,\n    isMultipart: chunks.length > 1,\n  }\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        432,
        128
      ],
      "id": "d51e0b3b-594d-47af-8d20-4d748fc4769d",
      "name": "Prepare for Dash"
    },
    {
      "parameters": {
        "chatId": "6599995384",
        "text": "={{ $json.cleanedResponse }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "MarkdownV2"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        656,
        128
      ],
      "id": "3a2cfd24-16f1-4912-a665-d614d1d8d343",
      "name": "Telegram to Corey Cauble",
      "webhookId": "b0a0b2fa-def7-452b-9ec5-49ec3a03a586",
      "credentials": {
        "telegramApi": {
          "id": "vvoc7IVAfk1i2qS2",
          "name": "Telegram (DASH)"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Helen (Reciprocity Agent)",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store": {
      "ai_tool": [
        [
          {
            "node": "Helen (Reciprocity Agent)",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Zep": {
      "ai_memory": [
        [
          {
            "node": "Helen (Reciprocity Agent)",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit fields": {
      "main": [
        [
          {
            "node": "Helen (Reciprocity Agent)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Helen (Reciprocity Agent)": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          },
          {
            "node": "Prepare for Dash",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare for Dash": {
      "main": [
        [
          {
            "node": "Telegram to Corey Cauble",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "j9xKJDh5LrpbrWLV"
  },
  "versionId": "e2a4073f-605b-456c-995c-3cc3543b9a6c",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "0aed448db8bea3d866d9d07faa7651fc87999403a92df7fc5038094cffa1e1fe"
  },
  "id": "cDAHtGpeR5fa0Dtr",
  "tags": [
    {
      "updatedAt": "2025-08-23T14:16:18.781Z",
      "createdAt": "2025-08-23T14:16:18.781Z",
      "id": "R9mYKVsn6pwhD8Ut",
      "name": "Visual"
    },
    {
      "updatedAt": "2025-08-19T19:03:50.989Z",
      "createdAt": "2025-08-19T19:03:50.989Z",
      "id": "mxIKbPw75Qi3GOcT",
      "name": "WH"
    }
  ]
}